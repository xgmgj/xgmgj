import{u as M,_ as A}from"./_plugin-vue_export-helper-D5cJ3cV5.js";import{r as b,e as s,h as U,g as h,w as l,d as e,b as u,E,i as $,c as S,a as r,F as G,f as I,u as C,j as B,t as c,k as H}from"./index-DX1DBay6.js";const J={__name:"GeneralCard",setup(z,{expose:_}){const V=M(),m=b(!1),p=b(),a=b({name:"",sets:"",num:"",time:""}),y={name:[{required:!0,message:"请输入动作名称",trigger:"blur"},{pattern:/^\S{1,15}$/,message:"动作名称要求是1-15非空字符",trigger:"blur"}],sets:[{required:!0,message:"请输入训练组数",trigger:"blur"},{pattern:/^[0-9]{1,10}$/,message:"组数要求是1-10位数字",trigger:"blur"}],num:[{required:!0,message:"请输入训练次数",trigger:"blur"}],time:[{required:!0,message:"请输入训练时长",trigger:"blur"},{pattern:/^0\.[1-9]\d*|[1-9]\d*(\.\d+)?$/,message:"时长要求是大于0的数",trigger:"blur"}]},k=async()=>{await p.value.validate(),a.value.id?(await V.editExercise({...a.value}),E.success("动作编辑成功")):(await V.addExercise({...a.value}),E.success("动作添加成功")),a.value={},m.value=!1};return _({open:w=>{m.value=!0,a.value={...w}}}),(w,n)=>{const f=s("el-input"),g=s("el-form-item"),d=s("el-form"),t=s("el-button"),v=s("el-dialog");return h(),U(v,{modelValue:m.value,"onUpdate:modelValue":n[5]||(n[5]=i=>m.value=i),title:a.value.id?"编辑动作":"添加动作",width:"500"},{footer:l(()=>[e(t,{onClick:n[4]||(n[4]=i=>m.value=!1)},{default:l(()=>n[6]||(n[6]=[u("取消",-1)])),_:1,__:[6]}),e(t,{type:"primary",onClick:k},{default:l(()=>n[7]||(n[7]=[u("确认",-1)])),_:1,__:[7]})]),default:l(()=>[e(d,{ref_key:"formRef",ref:p,model:a.value,rules:y,"label-width":"80px"},{default:l(()=>[e(g,{label:"名称:",prop:"name"},{default:l(()=>[e(f,{modelValue:a.value.name,"onUpdate:modelValue":n[0]||(n[0]=i=>a.value.name=i),placeholder:"请输入动作名称"},null,8,["modelValue"])]),_:1}),e(g,{label:"组数:",prop:"sets"},{default:l(()=>[e(f,{modelValue:a.value.sets,"onUpdate:modelValue":n[1]||(n[1]=i=>a.value.sets=i),modelModifiers:{number:!0},type:"number",placeholder:"请输入训练组数"},null,8,["modelValue"])]),_:1}),e(g,{label:"次数:",prop:"num"},{default:l(()=>[e(f,{modelValue:a.value.num,"onUpdate:modelValue":n[2]||(n[2]=i=>a.value.num=i),placeholder:"请输入每组次数"},null,8,["modelValue"])]),_:1}),e(g,{label:"时长:",prop:"time"},{default:l(()=>[e(f,{modelValue:a.value.time,"onUpdate:modelValue":n[3]||(n[3]=i=>a.value.time=i),modelModifiers:{number:!0},type:"number",step:"0.5",placeholder:"请输入训练时长"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}},K={class:"plans-page"},O={class:"filter-table"},Q={style:{"align-items":"center"}},W={style:{"margin-left":"10px"}},X={style:{"text-align":"center"}},Y={class:"add-table"},Z={class:"flex flex-wrap gap-4",height:"500"},ee={class:"card"},le={class:"btn"},te={__name:"PlansPage",setup(z){const _=M(),V=$(()=>_.exercises),m=_.plans,p=b(""),a=b(""),y=b(),k=()=>{document.body.style.overflow="hidden"},T=()=>{document.body.style.overflow=""},w=$(()=>V.value.filter(d=>!p.value||d.name.toLowerCase().includes(p.value.toLowerCase()))),n=d=>{y.value.open(d)},f=async d=>{a.value=d.id,console.log(d.id),await H.confirm("确认删除？","提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),await _.deleteExercise(a.value),console.log("删除后的数据:",_.exercises),E.success("删除完成")},g=()=>{y.value.open({})};return(d,t)=>{const v=s("el-table-column"),i=s("timer"),q=s("el-icon"),P=s("el-tag"),D=s("el-popover"),F=s("el-input"),x=s("el-button"),L=s("el-table"),N=s("el-divider"),R=s("el-card");return h(),S("div",K,[r("div",O,[e(L,{data:w.value,style:{width:"100%"},height:"500"},{default:l(()=>[e(v,{label:"训练动作",width:"180",align:"center"},{default:l(o=>[r("div",Q,[r("span",W,c(o.row.name),1)])]),_:1}),e(v,{label:"运动次数",width:"180",align:"center"},{default:l(o=>[r("div",{onMouseenter:k,onMouseleave:T,style:{width:"100%",height:"100%",padding:"12px 0"}},[e(D,{effect:"light",trigger:"hover",placement:"top",width:"auto"},{default:l(()=>[r("div",X,[e(q,null,{default:l(()=>[e(i)]),_:1}),u(c(o.row.sets)+"组 ",1)])]),reference:l(()=>[e(P,null,{default:l(()=>[u(c(o.row.num)+"次",1)]),_:2},1024)]),_:2},1024)],32)]),_:1}),e(v,{label:"训练时间",width:"150",align:"center"},{default:l(o=>[r("span",null,c((o.row.sets*o.row.time).toFixed(1))+"分钟 ",1)]),_:1}),e(v,{align:"right",width:"150"},{header:l(()=>[e(F,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=o=>p.value=o),size:"small",placeholder:"Type to search"},null,8,["modelValue"])]),default:l(({row:o})=>[e(x,{size:"small",onClick:j=>n(o)},{default:l(()=>t[3]||(t[3]=[u(" 编辑 ",-1)])),_:2,__:[3]},1032,["onClick"]),e(x,{size:"small",type:"danger",onClick:j=>f(o)},{default:l(()=>t[4]||(t[4]=[u(" 删除 ",-1)])),_:2,__:[4]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),r("div",Y,[e(x,{class:"btn",type:"primary",onClick:g,plain:""},{default:l(()=>t[5]||(t[5]=[u("新添动作",-1)])),_:1,__:[5]}),e(J,{ref_key:"dialog",ref:y},null,512)])]),e(N,{"border-style":"dotted",direction:"vertical"}),r("div",Z,[r("div",ee,[(h(!0),S(G,null,I(C(m).slice(0,6),o=>(h(),U(R,{class:"el-card-demo",key:o.id,style:{width:"200px",height:"200px"},shadow:"hover"},{default:l(()=>[r("h3",null,c(o.name),1),r("span",null,"难度："+c(o.difficulty),1),r("p",null,"训练时间："+c(o.limitedTime),1)]),_:2},1024))),128))]),r("div",le,[e(x,{type:"primary",round:"",onClick:t[1]||(t[1]=o=>C(B).push("/exercise")),size:"large",plain:""},{default:l(()=>t[6]||(t[6]=[u("开始训练",-1)])),_:1,__:[6]}),e(x,{type:"primary",round:"",onClick:t[2]||(t[2]=o=>C(B).push("/custom")),size:"large",plain:""},{default:l(()=>t[7]||(t[7]=[u("自定义计划",-1)])),_:1,__:[7]})])])])}}},ne=A(te,[["__scopeId","data-v-949ad33f"]]);export{ne as default};
