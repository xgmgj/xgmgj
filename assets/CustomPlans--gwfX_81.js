import{_ as ee,u as te}from"./_plugin-vue_export-helper-D5cJ3cV5.js";import{i as b,r as z,h as g,w as s,e as a,g as r,d as t,a as n,c as f,F as k,f as C,t as c,u as le,j as se,b as y,l as N,E as u,k as ne}from"./index-DX1DBay6.js";const oe={class:"el-tab1-left"},ae={class:"flex flex-wrap"},de={class:"btn"},ie={class:"el-tab1-right"},re={class:"exercise-form"},ce={key:0,class:"empty-hint"},ue={class:"plan-week"},_e={class:"card-header"},pe={key:0},fe={class:"plan-name"},me={class:"plan-desc"},ve={class:"plan-time"},xe={key:1},ye={class:"plans-list"},he={class:"plans-text"},be={__name:"CustomPlans",setup(ge){const _=te(),E=b(()=>_.exercises),$=b(()=>_.plans),w=b(()=>_.records),S=z("right"),d=z({name:"",exercises:[],difficulty:""}),A=o=>{if(d.value.exercises.includes(o.id)){u.warning("该动作已添加");return}d.value.exercises.length===5&&u.warning("贪多嚼不烂哦"),d.value.exercises.push(o.id)},I=o=>{d.value.exercises.splice(o,1)},P=b(()=>d.value.exercises.map(o=>E.value.find(e=>e.id===o))),M=()=>{if(!d.value.name){u.error("请输入计划名称");return}if(d.value.exercises.length===0){u.error("请至少添加一个动作");return}if(!d.value.difficulty){u.error("请选择难度等级");return}_.addPlan({name:d.value.name,difficulty:d.value.difficulty,exercises:d.value.exercises,limitedTime:U()}),u.success("创建成功"),D()},U=()=>`${P.value.reduce((e,i)=>e+i.sets*i.time+i.sets,0).toFixed(1)}分钟`,D=()=>{d.value={name:"",exercises:[],difficulty:""}},j=o=>{const e=F.find(p=>!m(p));if(!e){u.warning("本周计划已满，无法添加新计划");return}const i=w.value.find(p=>p.date===e);i?(_.updateRecord({...i,planId:o}),u.success("计划添加成功")):(_.addRecord({planId:o,date:e,progress:0}),u.success(`已为${e}添加计划`))},F=["周一","周二","周三","周四","周五","周六","周日"],m=o=>{const e=w.value.find(i=>i.date===o);return e?.planId?$.value.find(i=>i.id===e.planId):null},L=o=>{w.value.find(i=>i.date===o)&&(_.deleteRecordByDate(o),u.success("已删除该日计划"))},q=async o=>{await ne.confirm("确认删除？","提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),_.deletePlan(o),u.success("已删除该计划")};return(o,e)=>{const i=a("star-filled"),p=a("el-icon"),h=a("el-divider"),T=a("el-card"),G=a("el-scrollbar"),v=a("el-button"),H=a("el-tooltip"),J=a("el-input"),V=a("el-form-item"),K=a("el-tag"),B=a("el-option"),O=a("el-select"),Q=a("el-form"),R=a("el-tab-pane"),W=a("Close"),X=a("more"),Y=a("el-popover"),Z=a("el-tabs");return r(),g(Z,{"tab-position":S.value,style:{height:"600px"},class:"demo-tabs"},{default:s(()=>[t(R,{label:"训练计划",class:"el-tab1"},{default:s(()=>[n("div",oe,[e[4]||(e[4]=n("h1",{style:{color:"#1F2937"}},"新增训练计划",-1)),t(h,{class:"divider-left"},{default:s(()=>[t(p,null,{default:s(()=>[t(i)]),_:1})]),_:1}),n("div",ae,[t(G,{height:"360px"},{default:s(()=>[(r(!0),f(k,null,C(E.value,l=>(r(),g(T,{class:"el-card-demo",style:{"max-width":"200px","min-width":"80px",height:"60px","font-size":"14px"},shadow:"hover",key:l.id,onClick:x=>A(l)},{default:s(()=>[n("span",null,c(l.name)+" + ",1)]),_:2},1032,["onClick"]))),128))]),_:1})]),n("div",de,[t(H,{content:"点此添加你想要的动作",placement:"top"},{default:s(()=>[t(v,{type:"success",plain:"",onClick:e[0]||(e[0]=l=>le(se).push("/plans"))},{default:s(()=>e[3]||(e[3]=[y("添加",-1)])),_:1,__:[3]})]),_:1})])]),t(h,{class:"divider-center","border-style":"dashed",direction:"vertical"}),n("div",ie,[e[7]||(e[7]=n("h1",{style:{color:"#1F2937"}},"预设计划",-1)),n("div",re,[t(Q,{model:d.value},{default:s(()=>[t(V,{label:"计划名称"},{default:s(()=>[t(J,{modelValue:d.value.name,"onUpdate:modelValue":e[1]||(e[1]=l=>d.value.name=l),clearable:""},null,8,["modelValue"])]),_:1}),t(V,{label:"动作"},{default:s(()=>[(r(!0),f(k,null,C(P.value,(l,x)=>(r(),g(K,{key:l.id,closable:"",onClose:ke=>I(x),style:{"margin-left":"10px","margin-bottom":"10px"}},{default:s(()=>[y(c(l.name)+" ("+c(l.sets)+"组x"+c(l.num)+"次) ",1)]),_:2},1032,["onClose"]))),128)),P.value.length===0?(r(),f("div",ce," 请从左侧选择动作添加到计划中 ")):N("",!0)]),_:1}),t(h,{"border-style":"dashed"}),t(V,{label:"难度"},{default:s(()=>[t(O,{modelValue:d.value.difficulty,"onUpdate:modelValue":e[2]||(e[2]=l=>d.value.difficulty=l),placeholder:"设置难度",style:{width:"240px"},clearable:""},{default:s(()=>[t(B,{label:"轻松",value:"轻松"}),t(B,{label:"中等",value:"中等"}),t(B,{label:"进阶",value:"进阶"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),t(v,{type:"success",plain:"",onClick:M},{default:s(()=>e[5]||(e[5]=[y("新建计划",-1)])),_:1,__:[5]}),t(v,{type:"info",plain:"",onClick:D},{default:s(()=>e[6]||(e[6]=[y("清空",-1)])),_:1,__:[6]})])])]),_:1}),t(R,{label:"本周计划",class:"el-tab2"},{default:s(()=>[n("div",ue,[(r(),f(k,null,C(F,l=>t(T,{class:"el-card-demo",style:{width:"165px","max-height":"300px"},key:l},{header:s(()=>[n("div",_e,c(l),1)]),footer:s(()=>[m(l)?(r(),g(v,{key:0,type:"text",onClick:x=>L(l),style:{display:"block",margin:"0 auto"}},{default:s(()=>[t(p,{style:{"font-size":"20px",color:"#000"}},{default:s(()=>[t(W)]),_:1})]),_:2},1032,["onClick"])):N("",!0)]),default:s(()=>[m(l)?(r(),f("div",pe,[n("p",fe,c(m(l).name),1),n("p",me,"难度："+c(m(l).difficulty),1),n("p",ve,"时长："+c(m(l).limitedTime),1)])):(r(),f("div",xe,e[8]||(e[8]=[n("p",null,"休息（无计划）",-1)])))]),_:2},1024)),64))]),t(h,{class:"divider-left"},{default:s(()=>[t(p,null,{default:s(()=>[t(i)]),_:1})]),_:1}),n("div",ye,[(r(!0),f(k,null,C($.value,l=>(r(),f("div",{key:l.id},[t(Y,{placement:"bottom",title:"计划详情",width:150,trigger:"hover"},{reference:s(()=>[t(T,{class:"el-card-demo",style:{width:"150px",height:"60px","font-size":"12px",cursor:"pointer"},shadow:"hover",onClick:x=>j(l.id)},{default:s(()=>[n("span",he,c(l.name),1),t(p,{style:{float:"right","font-size":"14px"}},{default:s(()=>[t(X)]),_:1})]),_:2},1032,["onClick"])]),default:s(()=>[n("div",null,[n("p",null,"难度："+c(l.difficulty),1),n("p",null,"训练时间："+c(l.limitedTime),1),n("p",null,"动作数量："+c(l.exercises.length)+"个",1),t(v,{style:{display:"block",margin:"0 auto"},type:"info",text:"",onClick:x=>q(l.id)},{default:s(()=>e[9]||(e[9]=[y("删除",-1)])),_:2,__:[9]},1032,["onClick"])])]),_:2},1024)]))),128))])]),_:1})]),_:1},8,["tab-position"])}}},Pe=ee(be,[["__scopeId","data-v-5c8f7aa9"]]);export{Pe as default};
